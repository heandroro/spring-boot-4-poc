#!/usr/bin/env bash
set -euo pipefail

# Run integration test naming check always to prevent misnamed integration tests
# This fails the commit if any tests annotated as integration tests don't end with 'IT'.

echo "[pre-commit] Running integration test naming check..."
./gradlew -q checkIntegrationTestNames
rc=$?
if [ $rc -ne 0 ]; then
  echo "[pre-commit] Integration test naming check failed. Run ./gradlew checkIntegrationTestNames to see details." >&2
  exit $rc
fi

# Success - no further long-running scans are performed in the pre-commit hook
exit 0
