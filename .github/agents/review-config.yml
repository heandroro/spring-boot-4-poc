# GitHub Copilot Review Agent Configuration
# Configura√ß√£o para habilitar a leitura de coment√°rios do PR durante revis√µes

name: "Code Review Agent"
description: "Agente de revis√£o de c√≥digo que considera coment√°rios do PR"
version: "1.0"

# Habilitar leitura de coment√°rios do PR
read_pr_comments: true

# Contexto adicional que o agente deve considerar
context_sources:
  - pr_description          # Descri√ß√£o do Pull Request
  - pr_comments             # Coment√°rios no PR (gerais)
  - review_comments         # Coment√°rios inline no c√≥digo
  - commit_messages         # Mensagens de commit
  - file_changes            # Arquivos modificados no PR

# Arquivos de instru√ß√µes a considerar
instruction_files:
  - .github/instructions.md
  - .github/PULL_REQUEST_TEMPLATE.md
  - .github/agents/review.md
  - .vscode/copilot-instructions.md
  - CONTRIBUTING.md

# Focar revis√£o em tipos espec√≠ficos de mudan√ßas
focus_areas:
  - architecture            # Viola√ß√µes de arquitetura DDD
  - security                # Vulnerabilidades de seguran√ßa
  - testing                 # Cobertura e qualidade dos testes
  - mongodb                 # Best practices do MongoDB
  - spring_boot             # Uso correto do Spring Boot 4
  - java_25                 # Features do Java 25

# Prioridades de review
priority_order:
  1: security               # Seguran√ßa √© prioridade m√°xima
  2: functionality          # Bugs e l√≥gica incorreta
  3: architecture           # Conformidade com DDD
  4: performance            # Queries e √≠ndices
  5: maintainability        # Qualidade e manutenibilidade
  6: style                  # Estilo de c√≥digo

# Checklist autom√°tico baseado na template do PR
auto_checklist:
  enabled: true
  source: .github/PULL_REQUEST_TEMPLATE.md
  
  # Verifica√ß√µes obrigat√≥rias
  required_checks:
    - ddd_layers              # Separa√ß√£o de camadas DDD
    - constructor_injection   # Uso de constructor injection
    - no_lombok               # N√£o usar Lombok (usar Records)
    - mongodb_indexes         # √çndices MongoDB configurados
    - security_annotations    # @PreAuthorize nos endpoints
    - test_coverage           # Cobertura m√≠nima de testes
    - bean_validation         # Valida√ß√£o nos DTOs

# Comportamento do agente
behavior:
  # Sempre ler coment√°rios antes de revisar
  read_comments_first: true
  
  # Evitar duplicar feedback j√° fornecido
  avoid_duplicate_feedback: true
  
  # Considerar respostas do autor
  consider_author_responses: true
  
  # Focar apenas no diff do PR
  review_only_changes: true
  
  # Fornecer sugest√µes de c√≥digo
  provide_code_suggestions: true
  
  # N√≠vel de detalhe
  detail_level: detailed     # Options: brief, normal, detailed
  
  # Tom do feedback
  feedback_tone: constructive  # Options: strict, constructive, encouraging

# Filtros de review
filters:
  # Ignorar arquivos gerados
  exclude_patterns:
    - "*.gradle"
    - "gradlew*"
    - ".gradle/**"
    - "build/**"
    - "target/**"
    - "*.class"
    - "*.jar"
    - "*.war"
  
  # Focar em extens√µes espec√≠ficas
  include_patterns:
    - "*.java"
    - "*.md"
    - "*.yml"
    - "*.yaml"
    - "*.properties"

# Integra√ß√µes
integrations:
  # GitHub API para ler coment√°rios
  github_api:
    enabled: true
    permissions:
      - read:pull_request
      - read:comments
      - read:reviews
  
  # Ferramentas de an√°lise
  analysis_tools:
    - spotbugs              # An√°lise est√°tica Java
    - sonarqube             # Qualidade de c√≥digo
    - dependency_check      # Vulnerabilidades em depend√™ncias

# Formato de output
output:
  format: markdown           # Options: markdown, text, json
  
  # Estrutura do coment√°rio de review
  structure:
    - summary               # Resumo geral
    - critical_issues       # Issues cr√≠ticas
    - suggestions           # Sugest√µes de melhoria
    - positive_feedback     # Feedback positivo
    - checklist_status      # Status do checklist
  
  # Emojis para categoriza√ß√£o
  use_emojis: true
  emoji_mapping:
    security: "üîí"
    bug: "üêõ"
    performance: "‚ö°"
    architecture: "üèóÔ∏è"
    test: "üß™"
    style: "üíÖ"
    documentation: "üìù"
    positive: "‚úÖ"

# Limites
limits:
  max_comments_to_read: 100   # M√°ximo de coment√°rios a ler
  max_files_to_review: 50     # M√°ximo de arquivos a revisar
  max_suggestions_per_file: 5 # M√°ximo de sugest√µes por arquivo

# Aprendizado
learning:
  # Aprender com feedback dos desenvolvedores
  learn_from_feedback: true
  
  # Adaptar √†s prefer√™ncias da equipe
  adapt_to_team_style: true
  
  # Melhorar com o tempo
  continuous_improvement: true
