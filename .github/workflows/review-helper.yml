# .github/workflows/review-helper.yml
name: Review Helper

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  contents: read
  pull-requests: write
  issues: write

jobs:
  quality-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Run tests
        run: ./gradlew test
      
      - name: Check coverage
        run: ./gradlew jacocoTestReport
      
      - name: Analyze with Copilot
        # Copilot faz review automaticamente
        # se configurado em .github/copilot.yml
        run: echo "Copilot review triggered"
      
      - name: Comment Summary
        if: success()
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `## âœ… Quality Checks Passed
              
              - âœ… Build successful
              - âœ… All tests passing
              - âœ… Copilot review completed
              
              **Ready for human review!** ðŸ‘€
              
              Se tudo estiver OK no review do Copilot, vocÃª pode aprovar rapidamente.`
            })